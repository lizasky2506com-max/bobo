<Window x:Class="BANKOMAT.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BANKOMAT.Wpf"
        mc:Ignorable="d"
        Title="BANKOMAT" Height="720" Width="1100" WindowStartupLocation="CenterScreen"
        Background="{StaticResource GlamBackground}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel Margin="20" Orientation="Horizontal" HorizontalAlignment="Right">
            <TextBlock Text="BANKOMAT" FontSize="24" FontWeight="Bold" Foreground="White" Margin="0,10" />
        </StackPanel>
        <Border Grid.Row="1" CornerRadius="20" Padding="24" Background="{StaticResource CardBackground}" Effect="{StaticResource CardShadow}" Margin="30">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <DockPanel Margin="0,0,0,10">
                    <StackPanel DockPanel.Dock="Left">
                        <TextBlock Text="Twoje konto" FontSize="22" FontWeight="SemiBold" Foreground="White" />
                        <TextBlock Text="{Binding Greeting}" FontSize="14" Foreground="#FFE5D7" />
                    </StackPanel>
                    <Border Background="#30FFFFFF" CornerRadius="12" Padding="14" HorizontalAlignment="Right" Margin="10,0,0,0">
                        <StackPanel>
                            <TextBlock Text="Saldo" Foreground="#FFE5D7" FontWeight="SemiBold" />
                            <TextBlock Text="{Binding BalanceDisplay}" FontSize="20" FontWeight="Bold" Foreground="White" />
                        </StackPanel>
                    </Border>
                </DockPanel>

                <TabControl Grid.Row="1" Background="Transparent" BorderBrush="Transparent">
                    <TabItem Header="Logowanie" Background="#20FFFFFF">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="3*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel>
                                <TextBlock Text="Numer karty" Foreground="White" Margin="0,0,0,4" />
                                <TextBox Text="{Binding CardNumber, UpdateSourceTrigger=PropertyChanged}" MaxLength="16"/>
                                <TextBlock Text="PIN" Foreground="White" Margin="0,12,0,4" />
                                <PasswordBox x:Name="PinBox" MaxLength="4" PasswordChar="•" PasswordChanged="PinBox_OnPasswordChanged"/>
                                <Button Content="Zaloguj" Margin="0,14,0,0" Command="{Binding LoginCommand}"/>
                                <Button Content="Wyloguj" Command="{Binding LogoutCommand}"/>
                                <TextBlock Text="{Binding LoginMessage}" Foreground="{StaticResource Accent}" Margin="0,10,0,0" TextWrapping="Wrap" />
                            </StackPanel>
                            <StackPanel Grid.Column="1" Margin="20,0,0,0">
                                <TextBlock Text="Obsługiwane dane" FontWeight="SemiBold" FontSize="16" Foreground="White"/>
                                <TextBlock Text="• Numer karty: 16 cyfr" Foreground="#FFE5D7" Margin="0,6"/>
                                <TextBlock Text="• PIN: 4 cyfry" Foreground="#FFE5D7"/>
                                <TextBlock Text="• Po 3 błędnych próbach karta jest blokowana" Foreground="#FFE5D7" Margin="0,6"/>
                                <TextBlock Text="Możesz używać klawiatury i myszy." Foreground="#FFE5D7" Margin="0,12,0,0"/>
                            </StackPanel>
                        </Grid>
                    </TabItem>

                    <TabItem Header="Wpłata" Background="#20FFFFFF" IsEnabled="{Binding IsLoggedIn}">
                        <StackPanel Margin="20">
                            <TextBlock Text="Kwota" Foreground="White" />
                            <TextBox Text="{Binding DepositAmount, UpdateSourceTrigger=PropertyChanged}" />
                            <Button Content="Wpłać" Command="{Binding DepositCommand}"/>
                            <TextBlock Text="{Binding DepositMessage}" Foreground="{StaticResource Accent}" Margin="0,10,0,0" TextWrapping="Wrap" />
                        </StackPanel>
                    </TabItem>

                    <TabItem Header="Wypłata" Background="#20FFFFFF" IsEnabled="{Binding IsLoggedIn}">
                        <StackPanel Margin="20">
                            <TextBlock Text="Kwota" Foreground="White" />
                            <TextBox Text="{Binding WithdrawAmount, UpdateSourceTrigger=PropertyChanged}" />
                            <Button Content="Wypłać" Command="{Binding WithdrawCommand}"/>
                            <TextBlock Text="{Binding WithdrawMessage}" Foreground="{StaticResource Accent}" Margin="0,10,0,0" TextWrapping="Wrap" />
                        </StackPanel>
                    </TabItem>

                    <TabItem Header="Przelew" Background="#20FFFFFF" IsEnabled="{Binding IsLoggedIn}">
                        <StackPanel Margin="20">
                            <TextBlock Text="Karta odbiorcy (16 cyfr)" Foreground="White" />
                            <TextBox Text="{Binding TransferCard, UpdateSourceTrigger=PropertyChanged}" MaxLength="16" />
                            <TextBlock Text="Kwota" Foreground="White" Margin="0,12,0,0" />
                            <TextBox Text="{Binding TransferAmount, UpdateSourceTrigger=PropertyChanged}" />
                            <Button Content="Wyślij" Command="{Binding TransferCommand}"/>
                            <TextBlock Text="{Binding TransferMessage}" Foreground="{StaticResource Accent}" Margin="0,10,0,0" TextWrapping="Wrap" />
                        </StackPanel>
                    </TabItem>

                    <TabItem Header="Historia" Background="#20FFFFFF" IsEnabled="{Binding IsLoggedIn}">
                        <Grid Margin="10">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="Ostatnie 10 operacji" Foreground="White" FontWeight="SemiBold" />
                            <ListView Grid.Row="1" ItemsSource="{Binding History}" Background="Transparent" BorderBrush="Transparent">
                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="Margin" Value="0,4"/>
                                        <Setter Property="Padding" Value="8"/>
                                        <Setter Property="Background" Value="#10FFFFFF"/>
                                        <Setter Property="Effect" Value="{StaticResource CardShadow}"/>
                                    </Style>
                                </ListView.ItemContainerStyle>
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Data" Width="180" DisplayMemberBinding="{Binding Time}" />
                                        <GridViewColumn Header="Typ" Width="120" DisplayMemberBinding="{Binding Type}" />
                                        <GridViewColumn Header="Kwota" Width="100" DisplayMemberBinding="{Binding Amount}" />
                                        <GridViewColumn Header="Saldo" Width="120" DisplayMemberBinding="{Binding BalanceAfter}" />
                                        <GridViewColumn Header="Notatka" Width="200" DisplayMemberBinding="{Binding Note}" />
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </Grid>
                    </TabItem>

                    <TabItem Header="Zmiana PIN" Background="#20FFFFFF" IsEnabled="{Binding IsLoggedIn}">
                        <StackPanel Margin="20">
                            <TextBlock Text="Aktualny PIN" Foreground="White" />
                            <PasswordBox x:Name="OldPinBox" PasswordChar="•" PasswordChanged="OldPinBox_OnPasswordChanged"/>
                            <TextBlock Text="Nowy PIN (4 cyfry)" Foreground="White" Margin="0,12,0,0" />
                            <PasswordBox x:Name="NewPinBox" PasswordChar="•" PasswordChanged="NewPinBox_OnPasswordChanged"/>
                            <Button Content="Zmień PIN" Command="{Binding ChangePinCommand}"/>
                            <TextBlock Text="{Binding ChangePinMessage}" Foreground="{StaticResource Accent}" Margin="0,10,0,0" />
                        </StackPanel>
                    </TabItem>
                </TabControl>
            </Grid>
        </Border>
    </Grid>
</Window>
